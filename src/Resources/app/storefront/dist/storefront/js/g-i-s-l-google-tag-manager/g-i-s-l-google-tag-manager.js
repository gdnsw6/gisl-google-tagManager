(()=>{"use strict";var e={857:e=>{var t=function(e){var t;return!!e&&"object"==typeof e&&"[object RegExp]"!==(t=Object.prototype.toString.call(e))&&"[object Date]"!==t&&e.$$typeof!==i},i="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function n(e,t){return!1!==t.clone&&t.isMergeableObject(e)?o(Array.isArray(e)?[]:{},e,t):e}function r(e,t,i){return e.concat(t).map(function(e){return n(e,i)})}function s(e){return Object.keys(e).concat(Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter(function(t){return Object.propertyIsEnumerable.call(e,t)}):[])}function a(e,t){try{return t in e}catch(e){return!1}}function o(e,i,c){(c=c||{}).arrayMerge=c.arrayMerge||r,c.isMergeableObject=c.isMergeableObject||t,c.cloneUnlessOtherwiseSpecified=n;var l,u,d=Array.isArray(i);return d!==Array.isArray(e)?n(i,c):d?c.arrayMerge(e,i,c):(u={},(l=c).isMergeableObject(e)&&s(e).forEach(function(t){u[t]=n(e[t],l)}),s(i).forEach(function(t){(!a(e,t)||Object.hasOwnProperty.call(e,t)&&Object.propertyIsEnumerable.call(e,t))&&(a(e,t)&&l.isMergeableObject(i[t])?u[t]=(function(e,t){if(!t.customMerge)return o;var i=t.customMerge(e);return"function"==typeof i?i:o})(t,l)(e[t],i[t],l):u[t]=n(i[t],l))}),u)}o.all=function(e,t){if(!Array.isArray(e))throw Error("first argument should be an array");return e.reduce(function(e,i){return o(e,i,t)},{})},e.exports=o}},t={};function i(n){var r=t[n];if(void 0!==r)return r.exports;var s=t[n]={exports:{}};return e[n](s,s.exports,i),s.exports}(()=>{i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t}})(),(()=>{i.d=(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}})(),(()=>{i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t)})(),(()=>{var e=i(857),t=i.n(e);class n{static ucFirst(e){return e.charAt(0).toUpperCase()+e.slice(1)}static lcFirst(e){return e.charAt(0).toLowerCase()+e.slice(1)}static toDashCase(e){return e.replace(/([A-Z])/g,"-$1").replace(/^-/,"").toLowerCase()}static toLowerCamelCase(e,t){let i=n.toUpperCamelCase(e,t);return n.lcFirst(i)}static toUpperCamelCase(e,t){return t?e.split(t).map(e=>n.ucFirst(e.toLowerCase())).join(""):n.ucFirst(e.toLowerCase())}static parsePrimitive(e){try{return/^\d+(.|,)\d+$/.test(e)&&(e=e.replace(",",".")),JSON.parse(e)}catch(t){return e.toString()}}}class r{static isNode(e){return"object"==typeof e&&null!==e&&(e===document||e===window||e instanceof Node)}static hasAttribute(e,t){if(!r.isNode(e))throw Error("The element must be a valid HTML Node!");return"function"==typeof e.hasAttribute&&e.hasAttribute(t)}static getAttribute(e,t){let i=!(arguments.length>2)||void 0===arguments[2]||arguments[2];if(i&&!1===r.hasAttribute(e,t))throw Error('The required property "'.concat(t,'" does not exist!'));if("function"!=typeof e.getAttribute){if(i)throw Error("This node doesn't support the getAttribute function!");return}return e.getAttribute(t)}static getDataAttribute(e,t){let i=!(arguments.length>2)||void 0===arguments[2]||arguments[2],s=t.replace(/^data(|-)/,""),a=n.toLowerCamelCase(s,"-");if(!r.isNode(e)){if(i)throw Error("The passed node is not a valid HTML Node!");return}if(void 0===e.dataset){if(i)throw Error("This node doesn't support the dataset attribute!");return}let o=e.dataset[a];if(void 0===o){if(i)throw Error('The required data attribute "'.concat(t,'" does not exist on ').concat(e,"!"));return o}return n.parsePrimitive(o)}static querySelector(e,t){let i=!(arguments.length>2)||void 0===arguments[2]||arguments[2];if(i&&!r.isNode(e))throw Error("The parent node is not a valid HTML Node!");let n=e.querySelector(t)||!1;if(i&&!1===n)throw Error('The required element "'.concat(t,'" does not exist in parent node!'));return n}static querySelectorAll(e,t){let i=!(arguments.length>2)||void 0===arguments[2]||arguments[2];if(i&&!r.isNode(e))throw Error("The parent node is not a valid HTML Node!");let n=e.querySelectorAll(t);if(0===n.length&&(n=!1),i&&!1===n)throw Error('At least one item of "'.concat(t,'" must exist in parent node!'));return n}static getFocusableElements(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document.body;return e.querySelectorAll('\n            input:not([tabindex^="-"]):not([disabled]):not([type="hidden"]),\n            select:not([tabindex^="-"]):not([disabled]),\n            textarea:not([tabindex^="-"]):not([disabled]),\n            button:not([tabindex^="-"]):not([disabled]),\n            a[href]:not([tabindex^="-"]):not([disabled]),\n            [tabindex]:not([tabindex^="-"]):not([disabled])\n        ')}static getFirstFocusableElement(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document.body;return this.getFocusableElements(e)[0]}static getLastFocusableElement(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,t=this.getFocusableElements(e);return t[t.length-1]}}class s{publish(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=new CustomEvent(e,{detail:t,cancelable:i});return this.el.dispatchEvent(n),n}subscribe(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=this,r=e.split("."),s=i.scope?t.bind(i.scope):t;if(i.once&&!0===i.once){let t=s;s=function(i){n.unsubscribe(e),t(i)}}return this.el.addEventListener(r[0],s),this.listeners.push({splitEventName:r,opts:i,cb:s}),!0}unsubscribe(e){let t=e.split(".");return this.listeners=this.listeners.reduce((e,i)=>([...i.splitEventName].sort().toString()===t.sort().toString()?this.el.removeEventListener(i.splitEventName[0],i.cb):e.push(i),e),[]),!0}reset(){return this.listeners.forEach(e=>{this.el.removeEventListener(e.splitEventName[0],e.cb)}),this.listeners=[],!0}get el(){return this._el}set el(e){this._el=e}get listeners(){return this._listeners}set listeners(e){this._listeners=e}constructor(e=document){this._el=e,e.$emitter=this,this._listeners=[]}}class a{init(){throw Error('The "init" method for the plugin "'.concat(this._pluginName,'" is not defined.'))}update(){}_init(){this._initialized||(this.init(),this._initialized=!0)}_update(){this._initialized&&this.update()}_mergeOptions(e){let i=n.toDashCase(this._pluginName),s=r.getDataAttribute(this.el,"data-".concat(i,"-config"),!1),a=r.getAttribute(this.el,"data-".concat(i,"-options"),!1),o=[this.constructor.options,this.options,e];s&&o.push(window.PluginConfigManager.get(this._pluginName,s));try{a&&o.push(JSON.parse(a))}catch(e){throw console.error(this.el),Error('The data attribute "data-'.concat(i,'-options" could not be parsed to json: ').concat(e.message))}return t().all(o.filter(e=>e instanceof Object&&!(e instanceof Array)).map(e=>e||{}))}_registerInstance(){window.PluginManager.getPluginInstancesFromElement(this.el).set(this._pluginName,this),window.PluginManager.getPlugin(this._pluginName,!1).get("instances").push(this)}_getPluginName(e){return e||(e=this.constructor.name),e}constructor(e,t={},i=!1){if(!r.isNode(e))throw Error("There is no valid element given.");this.el=e,this.$emitter=new s(this.el),this._pluginName=this._getPluginName(i),this.options=this._mergeOptions(t),this._initialized=!1,this._registerInstance(),this._init()}}class o{static isSupported(){return"undefined"!==document.cookie}static setItem(e,t,i){if(null==e)throw Error("You must specify a key to set a cookie");let n=new Date;n.setTime(n.getTime()+864e5*i);let r="";"https:"===location.protocol&&(r="secure"),document.cookie="".concat(e,"=").concat(t,";expires=").concat(n.toUTCString(),";path=/;sameSite=lax;").concat(r)}static getItem(e){if(!e)return!1;let t=e+"=",i=document.cookie.split(";");for(let e=0;e<i.length;e++){let n=i[e];for(;" "===n.charAt(0);)n=n.substring(1);if(0===n.indexOf(t))return n.substring(t.length,n.length)}return!1}static removeItem(e){document.cookie="".concat(e,"= ; expires = Thu, 01 Jan 1970 00:00:00 GMT;path=/")}static key(){return""}static clear(){}}class c{static isTouchDevice(){return"ontouchstart"in document.documentElement}static isIOSDevice(){return c.isIPhoneDevice()||c.isIPadDevice()}static isNativeWindowsBrowser(){return c.isIEBrowser()||c.isEdgeBrowser()}static isIPhoneDevice(){return!!navigator.userAgent.match(/iPhone/i)}static isIPadDevice(){return!!navigator.userAgent.match(/iPad/i)}static isIEBrowser(){return -1!==navigator.userAgent.toLowerCase().indexOf("msie")||!!navigator.userAgent.match(/Trident.*rv:\d+\./)}static isEdgeBrowser(){return!!navigator.userAgent.match(/Edge\/\d+/i)}static getList(){return{"is-touch":c.isTouchDevice(),"is-ios":c.isIOSDevice(),"is-native-windows":c.isNativeWindowsBrowser(),"is-iphone":c.isIPhoneDevice(),"is-ipad":c.isIPadDevice(),"is-ie":c.isIEBrowser(),"is-edge":c.isEdgeBrowser()}}}class l{static iterate(e,t){if(e instanceof Map||Array.isArray(e))return e.forEach(t);if(e instanceof FormData){for(var i of e.entries())t(i[1],i[0]);return}if(e instanceof NodeList)return e.forEach(t);if(e instanceof HTMLCollection)return Array.from(e).forEach(t);if(e instanceof Object)return Object.keys(e).forEach(i=>{t(e[i],i)});throw Error("The element type ".concat(typeof e," is not iterable!"))}}let u="offcanvas";class d{open(e,t,i,n,r,s,a){this._removeExistingOffCanvas();let o=this._createOffCanvas(i,s,a,n);this.setContent(e,n,r),this._openOffcanvas(o,t)}setContent(e,t){let i=this.getOffCanvas();i[0]&&(i[0].innerHTML=e,this._registerEvents(t))}setAdditionalClassName(e){this.getOffCanvas()[0].classList.add(e)}getOffCanvas(){return document.querySelectorAll(".".concat(u))}close(e){let t=this.getOffCanvas();l.iterate(t,e=>{bootstrap.Offcanvas.getInstance(e).hide()}),setTimeout(()=>{this.$emitter.publish("onCloseOffcanvas",{offCanvasContent:t})},e)}goBackInHistory(){window.history.back()}exists(){return this.getOffCanvas().length>0}_openOffcanvas(e,t){window.focusHandler.saveFocusState("offcanvas"),d.bsOffcanvas.show(),window.history.pushState("offcanvas-open",""),"function"==typeof t&&t()}_registerEvents(e){let t=c.isTouchDevice()?"touchend":"click",i=this.getOffCanvas();l.iterate(i,t=>{let n=()=>{setTimeout(()=>{t.remove(),window.focusHandler.resumeFocusState("offcanvas"),this.$emitter.publish("onCloseOffcanvas",{offCanvasContent:i})},e),t.removeEventListener("hide.bs.offcanvas",n)};t.addEventListener("hide.bs.offcanvas",n)}),window.addEventListener("popstate",this.close.bind(this,e),{once:!0});let n=document.querySelectorAll(".".concat("js-offcanvas-close"));l.iterate(n,i=>i.addEventListener(t,this.close.bind(this,e)))}_removeExistingOffCanvas(){d.bsOffcanvas=null;let e=this.getOffCanvas();return l.iterate(e,e=>e.remove())}_getPositionClass(e){return"left"===e?"offcanvas-start":"right"===e?"offcanvas-end":"offcanvas-".concat(e)}_createOffCanvas(e,t,i,n){let r=document.createElement("div");if(r.classList.add(u),r.classList.add(this._getPositionClass(e)),r.setAttribute("tabindex","-1"),!0===t&&r.classList.add("is-fullwidth"),i){let e=typeof i;if("string"===e)r.classList.add(i);else if(Array.isArray(i))i.forEach(e=>{r.classList.add(e)});else throw Error('The type "'.concat(e,'" is not supported. Please pass an array or a string.'))}return document.body.appendChild(r),d.bsOffcanvas=new bootstrap.Offcanvas(r,{backdrop:!1!==n||"static"}),r}constructor(){this.$emitter=new s}}let h=Object.freeze(new d);class g{static open(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"left",n=!(arguments.length>3)||void 0===arguments[3]||arguments[3],r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:350,s=arguments.length>5&&void 0!==arguments[5]&&arguments[5],a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"";h.open(e,t,i,n,r,s,a)}static setContent(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:350;h.setContent(e,t,i)}static setAdditionalClassName(e){h.setAdditionalClassName(e)}static close(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:350;h.close(e)}static exists(){return h.exists()}static getOffCanvas(){return h.getOffCanvas()}static REMOVE_OFF_CANVAS_DELAY(){return 350}}class m{get(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"application/json",n=this._createPreparedRequest("GET",e,i);return this._sendRequest(n,null,t)}post(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"application/json";n=this._getContentType(t,n);let r=this._createPreparedRequest("POST",e,n);return this._sendRequest(r,t,i)}delete(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"application/json";n=this._getContentType(t,n);let r=this._createPreparedRequest("DELETE",e,n);return this._sendRequest(r,t,i)}patch(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"application/json";n=this._getContentType(t,n);let r=this._createPreparedRequest("PATCH",e,n);return this._sendRequest(r,t,i)}abort(){if(this._request)return this._request.abort()}setErrorHandlingInternal(e){this._errorHandlingInternal=e}_registerOnLoaded(e,t){t&&(!0===this._errorHandlingInternal?(e.addEventListener("load",()=>{t(e.responseText,e)}),e.addEventListener("abort",()=>{console.warn("the request to ".concat(e.responseURL," was aborted"))}),e.addEventListener("error",()=>{console.warn("the request to ".concat(e.responseURL," failed with status ").concat(e.status))}),e.addEventListener("timeout",()=>{console.warn("the request to ".concat(e.responseURL," timed out"))})):e.addEventListener("loadend",()=>{t(e.responseText,e)}))}_sendRequest(e,t,i){return this._registerOnLoaded(e,i),e.send(t),e}_getContentType(e,t){return e instanceof FormData&&(t=!1),t}_createPreparedRequest(e,t,i){return this._request=new XMLHttpRequest,this._request.open(e,t),this._request.setRequestHeader("X-Requested-With","XMLHttpRequest"),i&&this._request.setRequestHeader("Content-type",i),this._request}constructor(){this._request=null,this._errorHandlingInternal=!1}}let p="loader",v={BEFORE:"before",INNER:"inner"};class f{create(){if(!this.exists()){if(this.position===v.INNER){this.parent.innerHTML=f.getTemplate();return}this.parent.insertAdjacentHTML(this._getPosition(),f.getTemplate())}}remove(){let e=this.parent.querySelectorAll(".".concat(p));l.iterate(e,e=>e.remove())}exists(){return this.parent.querySelectorAll(".".concat(p)).length>0}_getPosition(){return this.position===v.BEFORE?"afterbegin":"beforeend"}static getTemplate(){return'<div class="'.concat(p,'" role="status">\n                    <span class="').concat("visually-hidden",'">Loading...</span>\n                </div>')}static SELECTOR_CLASS(){return p}constructor(e,t=v.BEFORE){this.parent=e instanceof Element?e:document.body.querySelector(e),this.position=t}}let b=null;class y extends g{static open(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"left",r=!(arguments.length>4)||void 0===arguments[4]||arguments[4],s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:g.REMOVE_OFF_CANVAS_DELAY(),a=arguments.length>6&&void 0!==arguments[6]&&arguments[6],o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"";if(!e)throw Error("A url must be given!");h._removeExistingOffCanvas();let c=h._createOffCanvas(n,a,o,r);this.setContent(e,t,i,r,s),h._openOffcanvas(c)}static setContent(e,t,i,n,r){let s=new m;super.setContent('<div class="offcanvas-body">'.concat(f.getTemplate(),"</div>"),n,r),b&&b.abort();let a=e=>{super.setContent(e,n,r),"function"==typeof i&&i(e)};b=t?s.post(e,t,y.executeCallback.bind(this,a)):s.get(e,y.executeCallback.bind(this,a))}static executeCallback(e,t){"function"==typeof e&&e(t),window.PluginManager.initializePlugins()}}let E="element-loader-backdrop";class _ extends f{static create(e){e.classList.add("has-element-loader"),_.exists(e)||(_.appendLoader(e),setTimeout(()=>{let t=e.querySelector(".".concat(E));t&&t.classList.add("element-loader-backdrop-open")},1))}static remove(e){e.classList.remove("has-element-loader");let t=e.querySelector(".".concat(E));t&&t.remove()}static exists(e){return e.querySelectorAll(".".concat(E)).length>0}static getTemplate(){return'\n        <div class="'.concat(E,'">\n            <div class="loader" role="status">\n                <span class="').concat("visually-hidden",'">Loading...</span>\n            </div>\n        </div>\n        ')}static appendLoader(e){e.insertAdjacentHTML("beforeend",_.getTemplate())}}window.router["frontend.cookie.offcanvas"];class w{supports(e,t){return console.warn("[Google Analytics Plugin] Method 'supports' was not overridden by `"+this.constructor.name+"`. Default return set to false."),!1}execute(){console.warn("[Google Analytics Plugin] Method 'execute' was not overridden by `"+this.constructor.name+"`.")}disable(){this.active=!1}constructor(){this.active=!0}}class C extends w{execute(){let e=this.getEvents();window.PluginManager.getPluginInstances(this.getPluginName()).forEach(t=>{Object.keys(e).forEach(i=>{t.$emitter.subscribe(i,e[i])})})}getEvents(){console.warn("[Google Analytics Plugin] Method 'getEvents' was not overridden by `"+this.constructor.name+"`.")}getPluginName(){console.warn("[Google Analytics Plugin] Method 'getPluginName' was not overridden by `"+this.constructor.name+"`.")}}class A extends C{supports(){return!0}getPluginName(){return"AddToCart"}getEvents(){return{beforeFormSubmit:this._beforeFormSubmit.bind(this)}}_beforeFormSubmit(e){if(!this.active)return;let t=e.detail,i=null;if(t.forEach((e,t)=>{t.endsWith("[id]")&&(i=e)}),!i){console.warn("[codiverse GTM] Product ID could not be fetched. Skipping.");return}let n=this.getProductsObjectFromFormData(t,i),r="add_to_cart";document.querySelector("body").classList.contains("is-ctl-navigation")&&(r="add_to_cart_list"),dataLayer.push({ecommerce:null}),dataLayer.push({event:r,ecommerce:{currency:t.get("gisl-gtm-currency-code"),value:n.price*n.quantity,items:[n]}})}getProductsObjectFromFormData(e,t){let i={item_name:e.get("product-name"),item_id:e.get("gisl-gtm-product-sku"),quantity:Number(e.get("lineItems["+t+"][quantity]"))};return null!==e.get("gisl-gtm-product-variantname")&&Object.assign(i,{item_variant:e.get("gisl-gtm-product-variantname")}),null!==e.get("gisl-gtm-product-category")&&Object.assign(i,{item_category:e.get("gisl-gtm-product-category")}),null!==e.get("gisl-gtm-product-price")&&Object.assign(i,{price:Number(e.get("gisl-gtm-product-price"))}),null!==e.get("brand-name")&&Object.assign(i,{item_brand:e.get("brand-name")}),i}}class O extends w{supports(){return!0}execute(){document.addEventListener("click",this._onRemoveFromCart.bind(this))}_onRemoveFromCart(e){if(!this.active||!e.target.closest(".line-item-remove-button"))return;let t=r.querySelector(e.target.closest(".line-item-remove"),"input[name=gisl-gtm-product-sku]");if(!t)return;let i=r.querySelector(e.target.closest(".line-item-remove"),"input[name=gisl-gtm-product-name]"),n=r.querySelector(e.target.closest(".line-item-remove"),"input[name=gisl-gtm-product-price]"),s=r.querySelector(e.target.closest(".line-item-remove"),"input[name=gisl-gtm-total-price]"),a=r.querySelector(e.target.closest(".line-item-remove"),"input[name=gisl-gtm-product-quantity]"),o=r.querySelector(e.target.closest(".line-item-remove"),"input[name=gisl-gtm-currency-code]");dataLayer.push({ecommerce:null}),dataLayer.push({event:"remove_from_cart",ecommerce:{currency:o.value,value:Number(s.value),items:[{item_id:t.value,item_name:i.value,quantity:Number(a.value),price:Number(n.value),index:0}]}})}}class S{static getLineItems(){let e=r.querySelector(document,".hidden-line-items-information"),t=r.querySelectorAll(e,".hidden-line-item"),i=[];return t.forEach(t=>{i.push({id:r.getDataAttribute(t,"id"),name:r.getDataAttribute(t,"name"),quantity:r.getDataAttribute(t,"quantity"),price:r.getDataAttribute(t,"price"),currency:r.getDataAttribute(e,"currency")})}),i}static getAdditionalProperties(){let e=r.querySelector(document,".hidden-line-items-information");return{currency:r.getDataAttribute(e,"currency"),shipping:r.getDataAttribute(e,"shipping"),value:r.getDataAttribute(e,"value"),tax:r.getDataAttribute(e,"tax")}}}window.PluginManager.register("GoogleTagManager",class extends a{init(){if(this.cookieEnabledName="gislAllowGtmTracking",this.cookieAdsEnabledName="google-ads-enabled",this.handleCookieChangeEvent(),this.startGoogleTagManager(),!o.getItem(this.cookieEnabledName))return;this.fireCookieConsentEvent();let e=document.querySelector("[data-off-canvas-cart]");if(e){let t=window.PluginManager.getPluginInstanceFromElement(e,"OffCanvasCart");t&&t.$emitter.subscribe("offCanvasOpened",this.onOffCanvasOpened.bind(this))}let t=document.querySelector("[data-listing-pagination]");if(t){let e=window.PluginManager.getPluginInstanceFromElement(t,"Listing");e&&e.$emitter.subscribe("Listing/afterRenderResponse",this.onPageSwitched.bind(this))}let i=r.querySelector(document,"#wishlist-basket",!1);if(i){let e=window.PluginManager.getPluginInstanceFromElement(i,"WishlistStorage");e&&e.$emitter.subscribe("Wishlist/onProductAdded",this.onWishlistAdd.bind(this)),e&&e.$emitter.subscribe("Wishlist/onProductRemoved",this.onWishlistRemove.bind(this))}let n=r.querySelector(document,".product-wishlist-form",!1);n&&n.addEventListener("submit",this.onWishlistRemoveFormSubmit.bind(this))}fireCookieConsentEvent(){window.dataLayer.push({event:"cookieConsentGiven"})}fireSelectItemEvent(e){let t=e.target.closest(".card-body"),i={item_name:t.querySelector('input[name="product-name"]').value,item_id:t.querySelector('input[name="gisl-gtm-product-sku"]').value},n=t.querySelector('input[name="gisl-gtm-product-variantname"]'),r=t.querySelector('input[name="gisl-gtm-product-category"]'),s=t.querySelector('input[name="gisl-gtm-product-price"]'),a=t.querySelector('input[name="gisl-gtm-product-brand"]');null!==n&&Object.assign(i,{item_variant:n.value}),null!==r&&Object.assign(i,{item_category:r.value}),null!==a&&Object.assign(i,{item_brand:a.value}),null!==s&&Object.assign(i,{price:Number(s.value)}),dataLayer.push({ecommerce:null}),dataLayer.push({event:"select_item",ecommerce:{item_list_name:"Category",items:[i]}})}startGoogleTagManager(){this.controllerName=window.controllerName,this.actionName=window.actionName,this.events=[],this.registerDefaultEvents(),this.handleEvents()}handleEvents(){this.events.forEach(e=>{e.supports(this.controllerName,this.actionName)&&e.execute()})}registerDefaultEvents(){this.registerEvent(A),this.registerEvent(O),this.registerSelectItemEvent()}registerEvent(e){this.events.push(new e)}handleCookieChangeEvent(){document.$emitter.subscribe("CookieConfiguration_Update",this.handleCookies.bind(this))}handleCookies(e){let t=e.detail;if(this.updateConsentMode(t),t.hasOwnProperty(this.cookieEnabledName)){if(t[this.cookieEnabledName]){this.fireCookieConsentEvent();return}this.removeCookies(),this.disableEvents()}}removeCookies(){let e=document.cookie.split(";"),t=/^(_ga|_gat_UA$|_gid)/;e.forEach(e=>{let i=e.split("=")[0].trim();i.match(t)&&o.removeItem(i)})}disableEvents(){this.events.forEach(e=>{e.disable()})}updateConsentMode(e){if(0===Object.keys(e).length)return;let t={};Object.prototype.hasOwnProperty.call(e,this.cookieEnabledName)&&(t.analytics_storage=e[this.cookieEnabledName]?"granted":"denied"),Object.prototype.hasOwnProperty.call(e,this.cookieAdsEnabledName)&&(t.ad_storage=e[this.cookieAdsEnabledName]?"granted":"denied",t.ad_user_data=e[this.cookieAdsEnabledName]?"granted":"denied",t.ad_personalization=e[this.cookieAdsEnabledName]?"granted":"denied"),0!==Object.keys(t).length&&gtag("consent","update",t)}registerSelectItemEvent(){let e=r.querySelectorAll(document,"a.product-name, a.product-image-link, a.product-button-detail",!1);e&&e.forEach(e=>{e.addEventListener("click",this.fireSelectItemEvent)})}onPageSwitched(){this.registerSelectItemEvent()}onWishlistAdd(e){let t=this.getSkuFromEvent(e);this.fireWishlistEvent(t,"add_to_wishlist")}onWishlistRemove(e){let t=this.getSkuFromEvent(e);this.fireWishlistEvent(t,"remove_from_wishlist")}onWishlistRemoveFormSubmit(e){let t=r.querySelector(e.target,'input[name="gisl-gtm-product-sku"]',!1);this.fireWishlistEvent(t,"remove_from_wishlist")}fireWishlistEvent(e,t){null!==e&&dataLayer.push({event:t,ecommerce:{items:{item_id:e.value}}})}onOffCanvasOpened(){let e=S.getAdditionalProperties(),t=this.getLineItems();window.dataLayer.push({event:"view_cart",currency:e.currency,ecommerce:{items:t}})}getLineItems(){let e=r.querySelector(document,".hidden-line-items-information",!1),t=r.querySelectorAll(e,".hidden-line-item",!1),i=[];return t.forEach(e=>{i.push({item_id:r.getDataAttribute(e,"data-gisl-sku"),item_name:r.getDataAttribute(e,"name"),quantity:r.getDataAttribute(e,"quantity"),price:r.getDataAttribute(e,"data-gisl-price")})}),i}getSkuFromEvent(e){let t=e.detail.productId,i=r.querySelector(document,'input[value="'+t+'"]',!1);if(i)return r.querySelector(i.parentNode,'input[name="gisl-gtm-product-sku"]',!1)}})})()})();